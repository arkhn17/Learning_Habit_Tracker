# Learning Habit Tracker 画面遷移図

---

## 1. ドキュメント概要
本ドキュメントは、Learning Habit Tracker の **ページ間操作フロー・画面遷移** をまとめた内部仕様書です。  
各ページの詳細や UI・操作内容は **UI構想.md** を参照してください。

---

## 2. 遷移図

```mermaid
flowchart TD
    %% 0. 新規登録／ログインページ
    A0[0. 新規登録／ログインページ] -->|ログイン成功| A1[1. トップページ]
    A0 -->|ログイン失敗| A0
    A0 -->|新規登録成功 → ログイン操作| A0
    A0 -->|新規登録失敗| A0
    A0 -->|パスワード再設定成功 → ログイン操作| A0
    A0 -->|パスワード再設定失敗| A0

    %% トップページの操作
    A1 -->|学習を記録ボタン| B1[新規登録モーダル]
    B1 -->|保存成功| A1
    B1 -->|保存失敗| B1
    A1 -->|振り返りボタン| A2[2. カレンダー／振り返りページ]
    A1 -->|目標確認ボタン| A3[3. 目標設定ページ]

    %% トップページ ハンバーガーメニュー
    A1 -->|トップ| A1
    A1 -->|記録| A2
    A1 -->|目標| A3
    A1 -->|設定| A4[4. 設定ページ]

    %% カレンダー／振り返りページ操作
    A2 -->|日付タップ| B2[記録リスト展開]
    B2 -->|編集モーダル| B3[編集モーダル]
    B3 -->|保存成功| B2
    B3 -->|削除成功| B2
    B3 -->|保存/削除失敗| B3
    A2 -->|右下＋ボタン| B4[新規登録モーダル]
    B4 -->|保存成功| B2
    B4 -->|保存失敗| B4

    %% カレンダー ハンバーガー
    A2 -->|トップ| A1
    A2 -->|記録| A2
    A2 -->|目標| A3
    A2 -->|設定| A4

    %% 目標設定ページ操作
    A3 -->|目標カードタップ| B5[編集モーダル]
    B5 -->|保存成功| A3
    B5 -->|削除成功| A3
    B5 -->|失敗| B5
    A3 -->|右下＋ボタン| B6[新規目標モーダル]
    B6 -->|保存成功| A3
    B6 -->|保存失敗| B6
    A3 -->|週/月切替タブ| A3

    %% 目標 ハンバーガー
    A3 -->|トップ| A1
    A3 -->|記録| A2
    A3 -->|目標| A3
    A3 -->|設定| A4

    %% 設定ページ操作
    A4 -->|プロフィール編集| B7[プロフィール編集モーダル]
    B7 -->|保存成功| A4
    B7 -->|保存失敗| B7
    B7 -->|確認メール送信| B7
    A4 -->|配色テーマ変更| B8[テーマ変更]
    B8 -->|保存成功| A4
    B8 -->|保存失敗| B8
    A4 -->|CSVエクスポート| B9[エクスポート処理]
    B9 -->|成功| A4
    B9 -->|失敗| B9
    A4 -->|データ初期化| B10[初期化確認ダイアログ]
    B10 -->|OK→初期化成功| A4
    B10 -->|OK→初期化失敗| B10
    B10 -->|キャンセル| A4
    A4 -->|その他（規約/ログアウト）| A0

    %% 設定 ハンバーガー
    A4 -->|トップ| A1
    A4 -->|記録| A2
    A4 -->|目標| A3
    A4 -->|設定| A4